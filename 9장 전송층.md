# 9.1 전송층 서비스

- 하위 계층에 네트워크 층, 상위 계층에 응용 층이 있음
- 응용 계층은 보통 5, 6, 7층. TCP/IP 프로토콜은 5-7층이 같이 있음.
- lower-layer: 1,2,3층
- higher-layeer: 4,5,6,7층
- 상위 4계층은 neighbor가 아니라 end-to-end
- 앨리스가 브라우저를 켰다. 앨리스-밥: end-to-end, 밥-라우터, 라우터간: neighbor
- 보통 라우터는 1,2,3 층, 스위치는 1,2층
- 종단은 7층까지
- 앨리스와 밥의 종단간 연결을 해주는 것이 전송 계층임
- 스위치도 7층까지 있을 수도 있음
- 라우터도 7층까지 있을 수 있음
- 다만 그런 것들은 관리자가 라우터나 스위치를 제어하기 위한 프로토콜이지 실질적으로 밥과 앨리스가 주고받는 데이터를 보내고 받는 데에서는 쓰이지 않음. 즉 그런 과정에는 1-2, 1-3 층만 관여를 한다.
  그림 9.2 :
- 두 개의 프로세스가 분산 시스템으로 동작을 한다면 메시지를 주고받으면서 동작을 해야 하는데 종단 중 하나는 서버고 하나는 클라이언트임. 브라우저가 켜져있다면 데이터가 이동함.
- 목적지까지는 가게 해주는 것이 네트워크층 프로토콜이 하는 일임.
- 네트워크 통신하는 프로그램들 사이에 메시지를 주고받는 데에는 전송층 프로토콜이 서비스를 제공함
- 데이터가 잘 왔는지 체크를 하려면 전송층이 흐름제어와 오류제어라는 서비스를 해야 함.
- 즉 전송층은 종단간 신뢰성있는 정보 전달이라는 책임을 가짐

## 9.1.2 포트 번호

- 프로세스가 통신을 할 때 소켓을 여는데, 그 소켓 번호가 포트 번호임
- 하나의 컴퓨터 안에 여러 프로세스를 구분할 때 포트 번호를 씀
-

## 9.1.3 캡슐화와 역캡슐화

## 9.1.4 다중화 및 역다중화

## 9.1.5 흐름 제어

## 9.1.6 오류 제어

## 9.1.7 흐름 제어와 오류 제어의 결합

## 9.1.9 비연결형과 연결형 프로토콜

## FSM

- 프로토콜이 데이터를 주고받는 동작을 표현하는 방식
- 어떤 이벤트가 왔을 때 어떤 상태로 넘어가는지 표현함
- state 천이

# 9.2 전송층 프로토콜

- 4층에 있음
- VLAN : DL층 내용
- 포트마다 네트워크가 연결되어 있음
- 그 네트워크들은 물리적으로 분리되어 있으며, 네트워크 주소도 다름
- 버스 구조 하나에 컴퓨터들이 있는데 가상적으로는 분리된 네트워크처럼 만들어주는 것이 VLAN(virtual LAN)임
- 브릿지를 쓰지 않아도 스위치가 그 역할을 해줌
- cf) ARP는 브로드캐스팅임
- 라우터에는 트렁크가 연결되어 있음 -> 스위치와 연결
- 네트워크 이해에 VLAN도 중요해서 알고 있어야 함
- 스위치에도 MAC 주소 테이블이 있음
- Layer 1,2 : 스위치, VLAN, 광통신 등등
- Layer 3: 라우팅 테이블을 만든 후 패킷을 다른 네트워크로 보냄. IP 주소 할당, 서브네팅 등등
- 데이터 주고받는 것: TCP
- 실시간 통신 : UDP
- HTTP: 웹 브라우저에서 클라이언트와 서버가 HTML 문서를 주고받는 규약
- DNS 서버
- DHCP: 처음에 IP주소 ~
- FTP: 파일 전송 프로토콜
- SMTP: 메일 전송 프로토콜

## 9.2.1 서비스

## 9.2.2 포트 번호

- 포트 번호는 미리 지정할 수도 있고 할당 받을 수도 있다

# 9.3 UDP

- connection-less
- UDP에서 검사합 구하는 과정:
  헤더만 보고 계산함. 그런데 IP헤더도 같이 계산함. 16비트짜리 10개를 그냥 다 더함, 보수를 취함

## 9.3.2 UDP 응용

- VPN(Virtual Private Network):
- 가상의 개인 네트워크
- 암호화해서 보내고 푸는 과정 -> 터널을 통해 가는 것과 같음
- 인터넷 : public 망
- public 망인 인터넷을 세 사람이 사설망처럼 써서 VPN이라고 함.

-

# 9.4 TCP

- connection-oriented

## 9.4.2 TCP 특징

- 번호 부여 시스템 : 바이트 번호를 가지고 순서 번호를 사용함

## 9.4.3 세그먼트

## 9.4.4 TCP 연결

- 2계층과 달리 4층의 연결은 가상적인 연결임

## 9.4.5 상태 천이도

## 9.4.6 TCP의 창

## 9.4.7 흐름 제어

# 9.5 SCTP

- UDP와 TCP의 장점을 살린 프로토콜

##
